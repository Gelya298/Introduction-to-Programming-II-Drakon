/*1326833758,169776069*/

if (window.CavalryLogger) { CavalryLogger.start_js(["EcS09"]); }

__d("Vector",["dom","ua","event-extensions","copyProperties"],function(f,h,i,g,e){var b=h("dom");var j=h("ua");var a=h("event-extensions").$E;var d=h("copyProperties");function c(l,m,k){d(this,{x:parseFloat(l),y:parseFloat(m),domain:k||'pure'});}d(c.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(m,n){if(arguments.length==1){if(m.domain!='pure')m=m.convertTo(this.domain);return this.add(m.x,m.y);}var k=parseFloat(m);var l=parseFloat(n);return new c(this.x+k,this.y+l,this.domain);},mul:function(k,l){if(typeof l=="undefined")l=k;return new c(this.x*k,this.y*l,this.domain);},sub:function(k,l){if(arguments.length==1){return this.add(k.mul(-1));}else return this.add(-k,-l);},distanceTo:function(k){return this.sub(k).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(k){if(k!='pure'&&k!='viewport'&&k!='document')return new c(0,0);if(k==this.domain)return new c(this.x,this.y,this.domain);if(k=='pure')return new c(this.x,this.y);if(this.domain=='pure')return new c(0,0);var l=c.getScrollPosition('document');var m=this.x,n=this.y;if(this.domain=='document'){m-=l.x;n-=l.y;}else{m+=l.x;n+=l.y;}return new c(m,n,k);},setElementPosition:function(k){var l=this.convertTo('document');k.style.left=parseInt(l.x)+'px';k.style.top=parseInt(l.y)+'px';return this;},setElementDimensions:function(k){return this.setElementWidth(k).setElementHeight(k);},setElementWidth:function(k){k.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(k){k.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(k){if(k==document.body){window.scrollBy(this.x,this.y);}else{k.scrollLeft+=this.x;k.scrollTop+=this.y;}return this;}});d(c,{getEventPosition:function(l,k){k=k||'document';l=a(l);var m=b.getDocumentScrollElement();var o=l.pageX||(l.clientX+m.scrollLeft);var p=l.pageY||(l.clientY+m.scrollTop);var n=new c(o,p,'document');return n.convertTo(k);},getScrollPosition:function(k){k=k||'document';var l=b.getDocumentScrollElement();var m=l.scrollLeft;var n=l.scrollTop;return new c(m,n,'document').convertTo(k);},getElementPosition:function(m,l){l=l||'document';if(!m)return;if(!('getBoundingClientRect' in m))return new c(0,0,'document');var o=m.getBoundingClientRect(),k=document.documentElement,n=Math.round(o.left)-k.clientLeft,p=Math.round(o.top)-k.clientTop;return new c(n,p,'viewport').convertTo(l);},getElementDimensions:function(k){return new c(k.offsetWidth||0,k.offsetHeight||0);},getViewportDimensions:function(){var k=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0;var l=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return new c(k,l,'viewport');},getDocumentDimensions:function(k){k=k||document;var l=b.getDocumentScrollElement(k);if(l===k.body&&j.firefox())l=k.documentElement;var m=l.scrollWidth||0;var n=l.scrollHeight||0;return new c(m,n,'document');},deserialize:function(l){var k=l.split(',');return new c(k[0],k[1]);}});g.exports=c;});